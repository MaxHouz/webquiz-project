function generateId(e){var t=[];for(key in e){var n=key.match(/[0-9]{1,}/)[0];t.push(n)}return t.length?arrayMax(t)+1:1}function arrayMax(e){return Math.max.apply(null,e)}function addUser(e){var t="user"+generateId(usersObject),n="user1"===t?{}:usersObject;n[t]={login:e,quizes:[]},localStorage.setItem("users",JSON.stringify(n))}function logIn(){function e(){"new-user-yes"===this.id?(addUser(r),t()):"new-user-no"===this.id&&newUserForm.classList.remove("active")}function t(){usersObject=JSON.parse(localStorage.getItem("users")),n=getIdbbyName(r),window.location="?userid="+n}var n,r=loginInput.value;if(userCheck(r))t();else{newUserForm.classList.add("active");for(var i=0;i<newUserConf.length;i++)newUserConf[i].addEventListener("click",e)}}function userCheck(e){for(key in usersObject)if(usersObject[key].login==e)return!0;return!1}function getIdbbyName(e){var t;for(key in usersObject)usersObject[key].login==e&&(t=key);return t}function userControl(){var e=document.querySelector(".quiz_start"),t=document.querySelector(".login_anchor");queryArray=window.location.search.split("&"),(currentUser=queryArray[0].split("=")[1])||(e.style.display="none",t.style.display="block",t.addEventListener("click",showLogInForm))}function formLink(e,t){var n,r;return-1==e.indexOf("#")?(r=e.split("?"),n=r[0]+"?userid="+t+(r[1]?"&"+r[1]:"")):-1==e.indexOf("userid")?(r=e.split("#"),n=r[0]+"?userid="+t+"#"+r[1]):(r=e.split("#"),n="#"+r[1]),n}function showLogInForm(){loginForm.classList.add("active"),loginItem.classList.add("active")}function logout(){if(currentUser){var e=document.querySelector(".header_menu-link.log");e.innerHTML="Log out",e.addEventListener("click",function(e){e.preventDefault();var t=window.location.pathname;window.location=t.split("?")[0]})}}function quizChange(){var e=document.querySelector(".quiz_choice.active"),t=document.querySelector(".quiz_info-title"),n=document.querySelector(".quiz_info-questions"),r=document.querySelector(".quiz_info-time");switch(e&&e.classList.remove("active"),this.classList.add("active"),this.id){case"js_quiz":t.innerHTML="JavaScript Quiz",n.innerHTML="15 questions",r.innerHTML="Average time : 7 minutes";break;case"html_quiz":t.innerHTML="HTML Quiz",n.innerHTML="20 questions",r.innerHTML="Average time : 6 minutes";break;case"css_quiz":t.innerHTML="CSS Quiz",n.innerHTML="15 questions",r.innerHTML="Average time : 5 minutes"}startBtn.disabled=!1}function quizLoad(){switch(document.querySelector(".quiz_choice.active").id){case"js_quiz":window.location.href=formLink("/quiz.html?type=js",currentUser);break;case"html_quiz":window.location.href=formLink("/quiz.html?type=html",currentUser);break;case"css_quiz":window.location.href=formLink("/quiz.html?type=css",currentUser)}}function blockLogInForm(){void 0===currentUser&&loginBtn.addEventListener("click",function(e){e.preventDefault(e),loginForm.classList.toggle("active"),loginItem.classList.toggle("active")})}function currentSlide(e){showSlides(e)}function showSlides(e){var t=document.querySelector(".slide.active");document.querySelector(".slide-btn.active").classList.remove("active"),t.classList.remove("active"),slideBtns[e].classList.add("active"),slides[e].classList.add("active"),slideIndex=e}var usersObject=JSON.parse(localStorage.getItem("users")),loginInput=document.querySelector(".login_input"),loginConfirm=document.querySelector(".login_confirm"),newUserForm=document.querySelector(".new_user"),newUserConf=document.querySelectorAll(".new_user-conf"),newUserYes=document.getElementById("new-user-yes"),newUserNo=document.getElementById("new-user-no");loginInput.addEventListener("keyup",function(e){13===e.keyCode&&loginConfirm.click()}),loginConfirm.addEventListener("click",logIn);var currentUser;document.addEventListener("DOMContentLoaded",userControl),document.addEventListener("DOMContentLoaded",logout);var jsQuiz=document.getElementById("js_quiz"),htmlQuiz=document.getElementById("html_quiz"),cssQuiz=document.getElementById("css_quiz"),startBtn=document.querySelector(".quiz_start");jsQuiz.addEventListener("click",quizChange),htmlQuiz.addEventListener("click",quizChange),cssQuiz.addEventListener("click",quizChange),startBtn.addEventListener("click",quizLoad);var searchBtn=document.getElementById("search"),searchInput=document.getElementById("search_input");searchBtn.addEventListener("change",function(){searchInput.classList.toggle("active")});var userElems=document.querySelectorAll(".user"),fastLinks=document.querySelectorAll(".quizes_dropdown-link"),menuItems=document.querySelectorAll(".header_menu-link"),homeLogo=document.querySelector(".header_logo-link");if(queryArray=window.location.search.split("&"),currentUser=queryArray[0].split("=")[1]){homeLogo.href=formLink(homeLogo.href,currentUser);for(var j=0;j<menuItems.length;j++)menuItems[j].href=formLink(menuItems[j].href,currentUser);for(var i=0;i<fastLinks.length;i++)fastLinks[i].href=formLink(fastLinks[i].href,currentUser)}else for(var i=0;i<userElems.length;i++)userElems[i].addEventListener("click",function(e){e.preventDefault(),showLogInForm()});document.addEventListener("DOMContentLoaded",blockLogInForm);var loginBtn=document.querySelector(".header_menu-link.log"),loginForm=document.querySelector(".login_form"),loginItem=document.querySelector(".header_menu-item.log"),slideIndex=0,slides=document.querySelectorAll(".slide"),slideBtns=document.querySelectorAll(".slide-btn");showSlides(slideIndex),setInterval(function(){slideIndex++,slideIndex>slides.length-1&&(slideIndex=0),showSlides(slideIndex)},4e3);for(var linkNav=document.querySelectorAll('[href^="#"]'),V=1,i=0;i<linkNav.length;i++)linkNav[i].addEventListener("click",function(e){function n(e){null===start&&(start=e);var o=e-start,s=t<0?Math.max(r-o/V,r+t):Math.min(r+o/V,r+t);window.scrollTo(0,s),s!=r+t?requestAnimationFrame(n):location.hash=i}e.preventDefault();var r=window.pageYOffset,i=this.href.replace(/[^#]*(.*)/,"$1");t=document.querySelector(i).getBoundingClientRect().top,start=null,requestAnimationFrame(n)},!1);