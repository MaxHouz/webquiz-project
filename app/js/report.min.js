function userControl(){var e=document.querySelector(".quiz_start"),t=document.querySelector(".login_anchor");queryArray=window.location.search.split("&"),(currentUser=queryArray[0].split("=")[1])||(e.style.display="none",t.style.display="block",t.addEventListener("click",showLogInForm))}function formLink(e,t){var r,n;return-1==e.indexOf("#")?(n=e.split("?"),r=n[0]+"?userid="+t+(n[1]?"&"+n[1]:"")):-1==e.indexOf("userid")?(n=e.split("#"),r=n[0]+"?userid="+t+"#"+n[1]):(n=e.split("#"),r="#"+n[1]),r}function showLogInForm(){loginForm.classList.add("active"),loginItem.classList.add("active")}function Question(e,t,r){this.text=e,this.choices=t,this.answer=r}function getQuizData(e,t){var r=new XMLHttpRequest;r.overrideMimeType("application/json"),r.open("GET",e,!1),r.onreadystatechange=function(){4===r.readyState&&"200"==r.status&&t(r.responseText)},r.send(null)}function formQuestionList(e){var t;getQuizData(e,function(e){t=JSON.parse(e)});var r=t,n=[];return r.map(function(e){n.push(new Question(e.questionText,e.choises,e.answer))}),n}function createReportMarkup(e){for(var t='<div class="report_question-text"></div>',r='<div class="user_choice">Your answer: <br></div>',n='<div class="correct_choice">Correct answer: <br></div>',s='<li class="report_details-item">'+t+r+n+"</li>";e>0;)markupContainer.innerHTML+=s,e--}function initQuestionData(e){for(var t=document.querySelectorAll(".report_question-text"),r=document.querySelectorAll(".user_choice"),n=document.querySelectorAll(".correct_choice"),s=0;s<e.length;s++)t[s].innerHTML=e[s].text,r[s].innerHTML+=currentQuizObject.userAnswers[s],n[s].innerHTML+=e[s].answer,currentQuizObject.userAnswers[s]==e[s].answer?(r[s].style.color="green",n[s].style.display="none"):r[s].style.color="red"}function showDetails(){createReportMarkup(questions.length),initQuestionData(questions)}function hideDetails(){markupContainer.innerHTML=""}var currentUser;document.addEventListener("DOMContentLoaded",userControl);var searchBtn=document.getElementById("search"),searchInput=document.getElementById("search_input");searchBtn.addEventListener("change",function(){searchInput.classList.toggle("active")});var userElems=document.querySelectorAll(".user"),fastLinks=document.querySelectorAll(".quizes_dropdown-link"),menuItems=document.querySelectorAll(".header_menu-link"),homeLogo=document.querySelector(".header_logo-link");if(queryArray=window.location.search.split("&"),currentUser=queryArray[0].split("=")[1]){homeLogo.href=formLink(homeLogo.href,currentUser);for(var j=0;j<menuItems.length;j++)menuItems[j].href=formLink(menuItems[j].href,currentUser);for(var i=0;i<fastLinks.length;i++)fastLinks[i].href=formLink(fastLinks[i].href,currentUser)}else for(var i=0;i<userElems.length;i++)userElems[i].addEventListener("click",function(e){e.preventDefault(),showLogInForm()});Question.prototype.correctAnswer=function(e){return e===this.answer};var currentQuiz=window.location.search.split("=")[2],quizesObject=JSON.parse(localStorage.getItem("quizes")),currentQuizObject=quizesObject[currentQuiz];console.log(currentQuiz);var reportType=document.getElementById("report_type"),reportScore=document.getElementById("report_score"),reportTime=document.getElementById("report_time"),detailsBtn=document.querySelector(".details_button"),markupContainer=document.querySelector(".report_details");detailsBtn.addEventListener("click",function(){markupContainer.classList.toggle("active"),detailsBtn.classList.toggle("active"),this.classList.contains("active")?showDetails():hideDetails()}),reportType.innerHTML=currentQuizObject.type,reportScore.innerHTML=currentQuizObject.score+" of "+currentQuizObject.total,reportTime.innerHTML=currentQuizObject.time;var queryUrl;switch(currentQuizObject.type){case"js":queryUrl="json/jsQuestions.json";break;case"html":queryUrl="json/htmlQuestions.json";break;case"css":queryUrl="json/cssQuestions.json"}var questions=formQuestionList(queryUrl);